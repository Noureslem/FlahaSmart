<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>

<VBox stylesheets="@/styles/style.css" xmlns:fx="http://javafx.com/fxml"
      fx:controller="controllers.WeatherWidgetController" spacing="25" alignment="TOP_CENTER">

    <padding>
        <Insets top="30" right="40" bottom="30" left="40"/>
    </padding>

    <!-- Titre de la page -->
    <Label text="ðŸŒ¤ MÃ©tÃ©o Agricole" styleClass="page-title"/>
    <Label text="Consultez la mÃ©tÃ©o pour optimiser vos opÃ©rations agricoles" styleClass="page-subtitle"/>

    <!-- Contenu principal -->
    <HBox spacing="30" alignment="TOP_CENTER">

        <!-- Carte de recherche mÃ©tÃ©o -->
        <VBox fx:id="weatherContainer" styleClass="weather-page-card" spacing="20" alignment="CENTER"
              prefWidth="450">

            <padding>
                <Insets top="25" right="25" bottom="25" left="25"/>
            </padding>

            <!-- Titre du widget -->
            <Label text="â˜€ Conditions actuelles" styleClass="weather-card-title"/>

            <!-- Barre de recherche -->
            <HBox spacing="15" alignment="CENTER">
                <TextField fx:id="cityInput" promptText="Entrez une ville..." styleClass="weather-input-large"
                           prefWidth="280" onAction="#onSearchWeather"/>
                <Button text="ðŸ”" onAction="#onSearchWeather" styleClass="weather-search-btn-large"/>
            </HBox>

            <!-- Indicateur de chargement -->
            <Label fx:id="loadingLabel" text="â³ Chargement des donnÃ©es mÃ©tÃ©o..." styleClass="loading-label"
                   visible="false" managed="false"/>

            <!-- Contenu mÃ©tÃ©o principal -->
            <VBox spacing="15" alignment="CENTER" styleClass="weather-main-content">

                <!-- Localisation -->
                <Label fx:id="locationLabel" text="--" styleClass="weather-location-large"/>

                <!-- <ImageView fx:id="weatherIcon" fitWidth="100" fitHeight="100" preserveRatio="true" visible="false"/>
                IcÃ´ne mÃ©tÃ©o -->


                <!-- TempÃ©rature -->
                <Label fx:id="temperatureLabel" text="--Â°C" styleClass="weather-temperature-large"/>

                <!-- Description -->
                <Label fx:id="descriptionLabel" text="" styleClass="weather-description-large"/>

            </VBox>

            <!-- DÃ©tails mÃ©tÃ©o -->
            <HBox spacing="20" alignment="CENTER" styleClass="weather-details-row">
                <VBox spacing="5" alignment="CENTER" styleClass="weather-detail-card">
                    <Label text="ðŸŒ¡ Ressenti" styleClass="detail-label"/>
                    <Label fx:id="feelsLikeLabel" text="--Â°C" styleClass="detail-value"/>
                </VBox>
                <VBox spacing="5" alignment="CENTER" styleClass="weather-detail-card">
                    <Label text="ðŸ’§ HumiditÃ©" styleClass="detail-label"/>
                    <Label fx:id="humidityLabel" text="--%"  styleClass="detail-value"/>
                </VBox>
                <VBox spacing="5" alignment="CENTER" styleClass="weather-detail-card">
                    <Label text="ðŸ’¨ Vent" styleClass="detail-label"/>
                    <Label fx:id="windLabel" text="-- km/h" styleClass="detail-value"/>
                </VBox>
            </HBox>

            <!-- Heure de mise Ã  jour -->
            <Label fx:id="timeLabel" text="ðŸ• DerniÃ¨re mise Ã  jour: --" styleClass="weather-time"/>

        </VBox>

        <!-- Conseils agricoles basÃ©s sur la mÃ©tÃ©o -->
        <VBox styleClass="weather-tips-card" spacing="15" prefWidth="350">
            <padding>
                <Insets top="25" right="25" bottom="25" left="25"/>
            </padding>

            <Label text="ðŸŒ¾ Conseils Agricoles" styleClass="tips-title"/>

            <VBox spacing="12" styleClass="tips-content">
                <HBox spacing="10" styleClass="tip-item">
                    <Label text="â˜€ï¸" styleClass="tip-icon"/>
                    <Label text="Par temps ensoleillÃ©, arrosez tÃ´t le matin ou en fin de journÃ©e"
                           styleClass="tip-text" wrapText="true"/>
                </HBox>
                <HBox spacing="10" styleClass="tip-item">
                    <Label text="ðŸŒ§ï¸" styleClass="tip-icon"/>
                    <Label text="En cas de pluie prÃ©vue, reportez l'irrigation et les traitements"
                           styleClass="tip-text" wrapText="true"/>
                </HBox>
                <HBox spacing="10" styleClass="tip-item">
                    <Label text="ðŸ’¨" styleClass="tip-icon"/>
                    <Label text="Ã‰vitez les pulvÃ©risations par vent fort (>20 km/h)"
                           styleClass="tip-text" wrapText="true"/>
                </HBox>
                <HBox spacing="10" styleClass="tip-item">
                    <Label text="â„ï¸" styleClass="tip-icon"/>
                    <Label text="ProtÃ©gez les cultures sensibles si gel annoncÃ©"
                           styleClass="tip-text" wrapText="true"/>
                </HBox>
                <HBox spacing="10" styleClass="tip-item">
                    <Label text="ðŸŒ¡ï¸" styleClass="tip-icon"/>
                    <Label text="TempÃ©ratures >30Â°C : augmentez la frÃ©quence d'irrigation"
                           styleClass="tip-text" wrapText="true"/>
                </HBox>
            </VBox>

        </VBox>

    </HBox>

</VBox>

